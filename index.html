<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <div></div> -->
  <meta charset="UTF-8" />
  <title>FS Minerals Logo Font Tester</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
    }

    h1 {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .layout {
      display: flex;
      gap: 20px;
      align-items: flex-start;
    }

    .logo-preview-wrapper {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    /* Adjust width/height to match your logo image ratio */
    .logo-preview {
      position: relative;
      width: 600px;
      height: 400px;
      background: white url("logo-base.png") no-repeat center left;
      background-size: contain;
      border: 1px solid #ddd;
    }

    .logo-preview[data-recolor-enabled="true"] {
      background-image: none;
    }

    .logo-preview[data-recolor-enabled="true"]::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("logo-base.png") no-repeat center left;
      background-size: contain;
      z-index: 0;
      filter: brightness(0) saturate(100%) invert(var(--recolor-invert, 0%)) sepia(100%) saturate(10000%) hue-rotate(var(--recolor-hue, 0deg)) brightness(var(--recolor-brightness, 1)) contrast(1);
    }

    .logo-preview::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--logo-color, transparent);
      pointer-events: none;
      mix-blend-mode: multiply;
      opacity: 0;
      transition: opacity 0.2s;
    }

    .logo-preview[data-color-enabled="true"]::before {
      opacity: var(--logo-opacity, 0);
    }

    .top-text,
    .bottom-text {
      position: absolute;
      white-space: nowrap;
      z-index: 10;
    }

    /* Approximate positions – tweak for your design */
    .top-text {
      left: 310px;
      top: 185px;
    }

    .bottom-text {
      left: 315px;
      top: 235px;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 16px;
      max-width: 320px;
    }

    fieldset {
      border-radius: 6px;
      border: 1px solid #ccc;
      padding: 10px 12px 14px;
      background: #fff;
    }

    legend {
      padding: 0 4px;
      font-weight: 600;
    }

    label {
      display: block;
      font-size: 12px;
      margin-top: 6px;
      margin-bottom: 2px;
    }

    input[type="text"],
    select,
    input[type="number"] {
      width: 100%;
      box-sizing: border-box;
      padding: 4px 6px;
      font-size: 13px;
    }

    input[type="color"] {
      padding: 0;
      border: none;
      background: transparent;
      cursor: pointer;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    button {
      padding: 8px 12px;
      cursor: pointer;
      border-radius: 4px;
      border: 1px solid #666;
      background: #fff;
    }

    .small-note {
      font-size: 11px;
      color: #555;
    }

    textarea {
      width: 100%;
      height: 80px;
      box-sizing: border-box;
      font-size: 11px;
      margin-top: 6px;
    }

    /* Custom Font Picker */
    .font-picker {
      position: relative;
      width: 100%;
    }

    .font-picker-button {
      width: 100%;
      padding: 6px 8px;
      text-align: left;
      background: white;
      border: 1px solid #ccc;
      border-radius: 3px;
      cursor: pointer;
      font-size: 13px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .font-picker-button:hover {
      border-color: #999;
    }

    .font-picker-button::after {
      content: '▼';
      font-size: 10px;
      color: #666;
    }

    .font-picker-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      border-radius: 3px;
      max-height: 300px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .font-picker-dropdown.open {
      display: block;
    }

    .font-category {
      padding: 6px 10px;
      background: #f0f0f0;
      font-size: 11px;
      font-weight: 600;
      color: #555;
      border-top: 1px solid #ddd;
    }

    .font-category:first-child {
      border-top: none;
    }

    .font-option {
      padding: 6px 10px;
      cursor: pointer;
      font-size: 14px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .font-option:hover {
      background: #e8f0fe;
    }

    .font-option.selected {
      background: #d0e4ff;
    }

    .font-option-name {
      font-size: 12px;
      color: #333;
      min-width: 140px;
    }

    .font-option-preview {
      flex: 1;
      text-align: right;
      font-style: italic;
      color: #666;
    }

    /* Expandable font families */
    .font-family {
      padding: 6px 10px;
      cursor: pointer;
      font-size: 14px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .font-family:hover {
      background: #e8f0fe;
    }

    .font-family-expand {
      width: 16px;
      font-size: 10px;
      color: #666;
      transition: transform 0.2s;
    }

    .font-family.expanded .font-family-expand {
      transform: rotate(90deg);
    }

    .font-family-name {
      font-size: 12px;
      color: #333;
      min-width: 140px;
    }

    .font-family-preview {
      flex: 1;
      text-align: right;
      font-style: italic;
      color: #666;
    }

    .font-variants {
      display: none;
      background: #fafafa;
    }

    .font-variants.show {
      display: block;
    }

    .font-variant {
      padding: 4px 10px 4px 30px;
      cursor: pointer;
      font-size: 13px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .font-variant:hover {
      background: #e8f0fe;
    }

    .font-variant.selected {
      background: #d0e4ff;
    }

    .font-variant-name {
      font-size: 11px;
      color: #555;
      min-width: 100px;
    }

    .font-variant-preview {
      flex: 1;
      text-align: right;
      font-style: italic;
      color: #666;
    }
  </style>
</head>
<body>
  <h1>FS Minerals Logo – Font & Color Playground</h1>
  <div class="layout">
    <!-- Preview -->
    <div class="logo-preview-wrapper">
      <div class="logo-preview">
        <div id="topPreview" class="top-text">FS Minerals Ltd.</div>
        <div id="bottomPreview" class="bottom-text">Fort Worth, Texas</div>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <fieldset>
        <legend>Top Text</legend>
        <label for="topText">Text</label>
        <input id="topText" type="text" value="FS Minerals Ltd." />

        <label>Font family</label>
        <div class="font-picker" id="topFontPicker">
          <button type="button" class="font-picker-button" id="topFontButton">
            <span id="topFontDisplay">Arial</span>
          </button>
          <div class="font-picker-dropdown" id="topFontDropdown"></div>
        </div>
        <input type="hidden" id="topFont" value="Arial, sans-serif" />

        <label for="topSize">Font size (px)</label>
        <input id="topSize" type="number" min="8" max="120" value="21" />

        <label>Position</label>
        <div class="row">
          <label for="topX" style="width: auto; margin: 0;">X:</label>
          <input id="topX" type="number" min="0" max="800" value="227" style="width: 70px;" />
          <label for="topY" style="width: auto; margin: 0;">Y:</label>
          <input id="topY" type="number" min="0" max="600" value="250" style="width: 70px;" />
        </div>

        <label>Color</label>
        <div class="row">
          <input id="topColor" type="color" value="#4c5a6a" />
          <input id="topColorText" type="text" value="#4c5a6a" />
        </div>
      </fieldset>

      <fieldset>
        <legend>Bottom Text</legend>
        <label for="bottomText">Text</label>
        <input id="bottomText" type="text" value="Fort Worth, Texas" />

        <label>Font family</label>
        <div class="font-picker" id="bottomFontPicker">
          <button type="button" class="font-picker-button" id="bottomFontButton">
            <span id="bottomFontDisplay">Arial</span>
          </button>
          <div class="font-picker-dropdown" id="bottomFontDropdown"></div>
        </div>
        <input type="hidden" id="bottomFont" value="Arial, sans-serif" />

        <label for="bottomSize">Font size (px)</label>
        <input id="bottomSize" type="number" min="8" max="120" value="12" />

        <label>Position</label>
        <div class="row">
          <label for="bottomX" style="width: auto; margin: 0;">X:</label>
          <input id="bottomX" type="number" min="0" max="800" value="276" style="width: 70px;" />
          <label for="bottomY" style="width: auto; margin: 0;">Y:</label>
          <input id="bottomY" type="number" min="0" max="600" value="297" style="width: 70px;" />
        </div>

        <label>Color</label>
        <div class="row">
          <input id="bottomColor" type="color" value="#4c5a6a" />
          <input id="bottomColorText" type="text" value="#4c5a6a" />
        </div>
      </fieldset>

      <fieldset>
        <legend>Logo Color</legend>
        <label>
          <input id="enableLogoRecolor" type="checkbox" />
          Change logo color (oil derrick)
        </label>

        <label>Logo Color</label>
        <div class="row">
          <input id="logoRecolor" type="color" value="#000000" />
          <input id="logoRecolorText" type="text" value="#000000" />
        </div>

        <hr style="margin: 12px 0; border: none; border-top: 1px solid #ddd;" />

        <label>
          <input id="enableLogoColor" type="checkbox" />
          Enable color tint overlay
        </label>

        <label>Tint Color</label>
        <div class="row">
          <input id="logoColor" type="color" value="#000000" />
          <input id="logoColorText" type="text" value="#000000" />
        </div>

        <label for="logoColorOpacity">Tint Opacity (%)</label>
        <input id="logoColorOpacity" type="range" min="0" max="100" value="50" />
        <span id="logoColorOpacityValue">50%</span>
      </fieldset>

      <div>
        <button id="copySettings">Copy settings</button>
        <div class="small-note">
          Click this and paste into an email/Slack so I can recreate it in Photoshop.
        </div>
        <textarea id="settingsOutput" readonly></textarea>
      </div>
    </div>
  </div>

  <script>
    // Font database organized by category with variants
    const fontDatabase = {
      'Sans Serif': [
        {
          name: 'Arial',
          variants: [
            { name: 'Regular', value: 'Arial, sans-serif', weight: 400 },
            { name: 'Black', value: "'Arial Black', sans-serif", weight: 900 },
            { name: 'Narrow', value: "'Arial Narrow', sans-serif", weight: 400 },
            { name: 'Rounded MT Bold', value: "'Arial Rounded MT Bold', sans-serif", weight: 700 }
          ]
        },
        {
          name: 'Bahnschrift',
          variants: [
            { name: 'Regular', value: 'Bahnschrift, sans-serif', weight: 400 },
            { name: 'Light', value: "'Bahnschrift Light', sans-serif", weight: 300 },
            { name: 'SemiLight', value: "'Bahnschrift SemiLight', sans-serif", weight: 350 },
            { name: 'SemiBold', value: "'Bahnschrift SemiBold', sans-serif", weight: 600 }
          ]
        },
        {
          name: 'Calibri',
          variants: [
            { name: 'Regular', value: 'Calibri, sans-serif', weight: 400 },
            { name: 'Light', value: "'Calibri Light', sans-serif", weight: 300 }
          ]
        },
        {
          name: 'Candara',
          variants: [
            { name: 'Regular', value: 'Candara, sans-serif', weight: 400 },
            { name: 'Light', value: "'Candara Light', sans-serif", weight: 300 }
          ]
        },
        { name: 'Century Gothic', variants: [{ name: 'Regular', value: "'Century Gothic', sans-serif", weight: 400 }] },
        { name: 'Franklin Gothic Medium', variants: [{ name: 'Regular', value: "'Franklin Gothic Medium', sans-serif", weight: 500 }] },
        { name: 'Gill Sans MT', variants: [{ name: 'Regular', value: "'Gill Sans MT', sans-serif", weight: 400 }] },
        { name: 'Impact', variants: [{ name: 'Regular', value: 'Impact, sans-serif', weight: 400 }] },
        { name: 'Lucida Sans Unicode', variants: [{ name: 'Regular', value: "'Lucida Sans Unicode', sans-serif", weight: 400 }] },
        {
          name: 'Segoe UI',
          variants: [
            { name: 'Regular', value: "'Segoe UI', sans-serif", weight: 400 },
            { name: 'Light', value: "'Segoe UI Light', sans-serif", weight: 300 },
            { name: 'Semilight', value: "'Segoe UI Semilight', sans-serif", weight: 350 },
            { name: 'Semibold', value: "'Segoe UI Semibold', sans-serif", weight: 600 },
            { name: 'Black', value: "'Segoe UI Black', sans-serif", weight: 900 }
          ]
        },
        { name: 'Tahoma', variants: [{ name: 'Regular', value: 'Tahoma, sans-serif', weight: 400 }] },
        { name: 'Trebuchet MS', variants: [{ name: 'Regular', value: "'Trebuchet MS', sans-serif", weight: 400 }] },
        { name: 'Verdana', variants: [{ name: 'Regular', value: 'Verdana, sans-serif', weight: 400 }] }
      ],
      'Serif': [
        { name: 'Book Antiqua', variants: [{ name: 'Regular', value: "'Book Antiqua', serif", weight: 400 }] },
        { name: 'Georgia', variants: [{ name: 'Regular', value: 'Georgia, serif', weight: 400 }] },
        {
          name: 'Rockwell',
          variants: [
            { name: 'Regular', value: 'Rockwell, serif', weight: 400 },
            { name: 'Condensed', value: "'Rockwell Condensed', serif", weight: 400 },
            { name: 'Extra Bold', value: "'Rockwell Extra Bold', serif", weight: 800 }
          ]
        },
        { name: 'Times New Roman', variants: [{ name: 'Regular', value: "'Times New Roman', serif", weight: 400 }] }
      ],
      'Script': [
        { name: 'Brush Script MT', variants: [{ name: 'Regular', value: "'Brush Script MT', cursive", weight: 400 }] },
        { name: 'Gabriola', variants: [{ name: 'Regular', value: 'Gabriola, cursive', weight: 400 }] },
        { name: 'Papyrus', variants: [{ name: 'Regular', value: 'Papyrus, cursive', weight: 400 }] }
      ],
      'Handwritten': [
        { name: 'Comic Sans MS', variants: [{ name: 'Regular', value: "'Comic Sans MS', cursive", weight: 400 }] },
        { name: 'Segoe Print', variants: [{ name: 'Regular', value: "'Segoe Print', cursive", weight: 400 }] }
      ],
      'Monospace': [
        {
          name: 'Cascadia Code',
          variants: [
            { name: 'Regular', value: "'Cascadia Code', monospace", weight: 400 },
            { name: 'ExtraLight', value: "'Cascadia Code ExtraLight', monospace", weight: 200 },
            { name: 'Light', value: "'Cascadia Code Light', monospace", weight: 300 },
            { name: 'SemiBold', value: "'Cascadia Code SemiBold', monospace", weight: 600 }
          ]
        },
        {
          name: 'Cascadia Mono',
          variants: [
            { name: 'ExtraLight', value: "'Cascadia Mono ExtraLight', monospace", weight: 200 },
            { name: 'Light', value: "'Cascadia Mono Light', monospace", weight: 300 },
            { name: 'SemiLight', value: "'Cascadia Mono SemiLight', monospace", weight: 350 },
            { name: 'Regular', value: "'Cascadia Mono', monospace", weight: 400 },
            { name: 'SemiBold', value: "'Cascadia Mono SemiBold', monospace", weight: 600 },
            { name: 'Bold', value: "'Cascadia Mono Bold', monospace", weight: 700 },
            { name: 'ExtraLight Italic', value: "'Cascadia Mono ExtraLight', monospace", weight: 200, italic: true },
            { name: 'Light Italic', value: "'Cascadia Mono Light', monospace", weight: 300, italic: true },
            { name: 'SemiLight Italic', value: "'Cascadia Mono SemiLight', monospace", weight: 350, italic: true },
            { name: 'Italic', value: "'Cascadia Mono', monospace", weight: 400, italic: true },
            { name: 'SemiBold Italic', value: "'Cascadia Mono SemiBold', monospace", weight: 600, italic: true },
            { name: 'Bold Italic', value: "'Cascadia Mono Bold', monospace", weight: 700, italic: true }
          ]
        },
        { name: 'Consolas', variants: [{ name: 'Regular', value: 'Consolas, monospace', weight: 400 }] },
        { name: 'Courier New', variants: [{ name: 'Regular', value: "'Courier New', monospace", weight: 400 }] }
      ],
      'Decorative': [
        { name: 'Cooper Black', variants: [{ name: 'Regular', value: "'Cooper Black', fantasy", weight: 400 }] },
        { name: 'Jokerman', variants: [{ name: 'Regular', value: 'Jokerman, fantasy', weight: 400 }] },
        { name: 'Stencil', variants: [{ name: 'Regular', value: 'Stencil, fantasy', weight: 400 }] }
      ]
    };

    const els = {
      enableLogoRecolor: document.getElementById("enableLogoRecolor"),
      logoRecolor: document.getElementById("logoRecolor"),
      logoRecolorText: document.getElementById("logoRecolorText"),
      enableLogoColor: document.getElementById("enableLogoColor"),
      logoColor: document.getElementById("logoColor"),
      logoColorText: document.getElementById("logoColorText"),
      logoColorOpacity: document.getElementById("logoColorOpacity"),
      logoColorOpacityValue: document.getElementById("logoColorOpacityValue"),
      topText: document.getElementById("topText"),
      topFont: document.getElementById("topFont"),
      topSize: document.getElementById("topSize"),
      topColor: document.getElementById("topColor"),
      topColorText: document.getElementById("topColorText"),
      topX: document.getElementById("topX"),
      topY: document.getElementById("topY"),
      bottomText: document.getElementById("bottomText"),
      bottomFont: document.getElementById("bottomFont"),
      bottomSize: document.getElementById("bottomSize"),
      bottomColor: document.getElementById("bottomColor"),
      bottomColorText: document.getElementById("bottomColorText"),
      bottomX: document.getElementById("bottomX"),
      bottomY: document.getElementById("bottomY"),
      topPreview: document.getElementById("topPreview"),
      bottomPreview: document.getElementById("bottomPreview"),
      logoPreview: document.querySelector(".logo-preview"),
      copySettings: document.getElementById("copySettings"),
      settingsOutput: document.getElementById("settingsOutput"),
      topFontButton: document.getElementById("topFontButton"),
      topFontDisplay: document.getElementById("topFontDisplay"),
      topFontDropdown: document.getElementById("topFontDropdown"),
      bottomFontButton: document.getElementById("bottomFontButton"),
      bottomFontDisplay: document.getElementById("bottomFontDisplay"),
      bottomFontDropdown: document.getElementById("bottomFontDropdown")
    };

    // Create font picker dropdown with expandable variants
    function createFontPicker(dropdownEl, hiddenInput, displayEl) {
      let html = '';
      for (const [category, fonts] of Object.entries(fontDatabase)) {
        html += `<div class="font-category">${category}</div>`;
        for (const font of fonts) {
          const familyId = category.replace(/\s+/g, '-') + '-' + font.name.replace(/\s+/g, '-');

          // If font has multiple variants, make it expandable
          if (font.variants && font.variants.length > 1) {
            html += `<div class="font-family" data-family-id="${familyId}">
              <span class="font-family-expand">►</span>
              <span class="font-family-name">${font.name}</span>
              <span class="font-family-preview" style="font-family: ${font.variants[0].value}">Sample</span>
            </div>`;
            html += `<div class="font-variants" id="${familyId}-variants">`;
            for (const variant of font.variants) {
              const italicStyle = variant.italic ? 'font-style: italic;' : '';
              html += `<div class="font-variant" data-value="${variant.value}" data-name="${font.name} ${variant.name}">
                <span class="font-variant-name">${variant.name}</span>
                <span class="font-variant-preview" style="font-family: ${variant.value}; font-weight: ${variant.weight}; ${italicStyle}">Sample</span>
              </div>`;
            }
            html += `</div>`;
          } else {
            // Single variant fonts don't expand
            const variant = font.variants[0];
            html += `<div class="font-option" data-value="${variant.value}" data-name="${font.name}">
              <span class="font-option-name">${font.name}</span>
              <span class="font-option-preview" style="font-family: ${variant.value}">Sample</span>
            </div>`;
          }
        }
      }
      dropdownEl.innerHTML = html;

      // Handle expandable font families
      dropdownEl.querySelectorAll('.font-family').forEach(family => {
        family.addEventListener('click', (e) => {
          e.stopPropagation();
          const familyId = family.getAttribute('data-family-id');
          const variantsDiv = document.getElementById(familyId + '-variants');
          family.classList.toggle('expanded');
          variantsDiv.classList.toggle('show');
        });
      });

      // Handle variant selection
      dropdownEl.querySelectorAll('.font-variant').forEach(variant => {
        variant.addEventListener('click', (e) => {
          e.stopPropagation();
          const value = variant.getAttribute('data-value');
          const name = variant.getAttribute('data-name');
          hiddenInput.value = value;
          displayEl.textContent = name;
          dropdownEl.classList.remove('open');
          updatePreview();
        });
      });

      // Handle single font selection
      dropdownEl.querySelectorAll('.font-option').forEach(option => {
        option.addEventListener('click', () => {
          const value = option.getAttribute('data-value');
          const name = option.getAttribute('data-name');
          hiddenInput.value = value;
          displayEl.textContent = name;
          dropdownEl.classList.remove('open');
          updatePreview();
        });
      });
    }

    // Initialize font pickers
    createFontPicker(els.topFontDropdown, els.topFont, els.topFontDisplay);
    createFontPicker(els.bottomFontDropdown, els.bottomFont, els.bottomFontDisplay);

    // Toggle dropdowns
    els.topFontButton.addEventListener('click', (e) => {
      e.stopPropagation();
      els.topFontDropdown.classList.toggle('open');
      els.bottomFontDropdown.classList.remove('open');
    });

    els.bottomFontButton.addEventListener('click', (e) => {
      e.stopPropagation();
      els.bottomFontDropdown.classList.toggle('open');
      els.topFontDropdown.classList.remove('open');
    });

    // Close dropdowns when clicking outside
    document.addEventListener('click', () => {
      els.topFontDropdown.classList.remove('open');
      els.bottomFontDropdown.classList.remove('open');
    });

    function hexFromInput(str) {
      let v = str.trim();
      if (!v) return null;
      if (!v.startsWith("#")) v = "#" + v;
      if (/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(v)) return v;
      return null;
    }

    function hexToHSL(hex) {
      // Convert hex to RGB
      let r = 0, g = 0, b = 0;
      if (hex.length === 4) {
        r = parseInt(hex[1] + hex[1], 16);
        g = parseInt(hex[2] + hex[2], 16);
        b = parseInt(hex[3] + hex[3], 16);
      } else if (hex.length === 7) {
        r = parseInt(hex.slice(1, 3), 16);
        g = parseInt(hex.slice(3, 5), 16);
        b = parseInt(hex.slice(5, 7), 16);
      }
      r /= 255;
      g /= 255;
      b /= 255;

      const max = Math.max(r, g, b);
      const min = Math.min(r, g, b);
      let h = 0, s = 0, l = (max + min) / 2;

      if (max !== min) {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

        switch (max) {
          case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
          case g: h = ((b - r) / d + 2) / 6; break;
          case b: h = ((r - g) / d + 4) / 6; break;
        }
      }

      return { h: h * 360, s: s * 100, l: l * 100 };
    }

    function updatePreview() {
      // Logo recolor (change the actual logo color)
      if (els.enableLogoRecolor.checked) {
        const hsl = hexToHSL(els.logoRecolor.value);

        // Calculate filter values for accurate color replication
        // Start with black (#000000 = hue 0), then rotate to target hue
        const hueRotate = hsl.h;
        const brightness = hsl.l / 50; // Convert lightness to brightness multiplier
        const invert = hsl.l > 50 ? 100 : 0; // Invert for lighter colors

        els.logoPreview.style.setProperty('--recolor-hue', hueRotate + 'deg');
        els.logoPreview.style.setProperty('--recolor-brightness', brightness);
        els.logoPreview.style.setProperty('--recolor-invert', invert + '%');
        els.logoPreview.setAttribute('data-recolor-enabled', 'true');
      } else {
        els.logoPreview.removeAttribute('data-recolor-enabled');
      }

      // Logo color tint overlay
      if (els.enableLogoColor.checked) {
        const opacityPercent = els.logoColorOpacity.value;
        const opacity = opacityPercent / 100;
        els.logoPreview.style.setProperty('--logo-color', els.logoColor.value);
        els.logoPreview.style.setProperty('--logo-opacity', opacity);
        els.logoPreview.setAttribute('data-color-enabled', 'true');
      } else {
        els.logoPreview.removeAttribute('data-color-enabled');
      }

      // Update opacity display
      els.logoColorOpacityValue.textContent = els.logoColorOpacity.value + '%';

      // Top
      els.topPreview.textContent = els.topText.value;
      els.topPreview.style.fontFamily = els.topFont.value;
      els.topPreview.style.fontSize = els.topSize.value + "px";
      els.topPreview.style.color = els.topColor.value;
      els.topPreview.style.left = els.topX.value + "px";
      els.topPreview.style.top = els.topY.value + "px";

      // Bottom
      els.bottomPreview.textContent = els.bottomText.value;
      els.bottomPreview.style.fontFamily = els.bottomFont.value;
      els.bottomPreview.style.fontSize = els.bottomSize.value + "px";
      els.bottomPreview.style.color = els.bottomColor.value;
      els.bottomPreview.style.left = els.bottomX.value + "px";
      els.bottomPreview.style.top = els.bottomY.value + "px";

      // Settings text
      let settings = '';
      if (els.enableLogoRecolor.checked) {
        settings += `Logo recolor: ${els.logoRecolor.value}\n`;
      }
      if (els.enableLogoColor.checked) {
        settings += `Logo tint: ${els.logoColor.value}\n`;
        settings += `Tint opacity: ${els.logoColorOpacity.value}%\n`;
      }
      if (els.enableLogoRecolor.checked || els.enableLogoColor.checked) {
        settings += '\n';
      }
      settings += `Top text: "${els.topText.value}"
Top font: ${els.topFontDisplay.textContent}
Top size: ${els.topSize.value}px
Top color: ${els.topColor.value}
Top position: X=${els.topX.value}px, Y=${els.topY.value}px

Bottom text: "${els.bottomText.value}"
Bottom font: ${els.bottomFontDisplay.textContent}
Bottom size: ${els.bottomSize.value}px
Bottom color: ${els.bottomColor.value}
Bottom position: X=${els.bottomX.value}px, Y=${els.bottomY.value}px`;
      els.settingsOutput.value = settings.trim();
    }

    // Wire events
    [
      "topText","topFont","topSize","topColor","topX","topY",
      "bottomText","bottomFont","bottomSize","bottomColor","bottomX","bottomY"
    ].forEach(id => {
      els[id].addEventListener("input", updatePreview);
    });

    // Logo recolor events
    els.enableLogoRecolor.addEventListener("change", updatePreview);
    els.logoRecolor.addEventListener("input", () => {
      els.logoRecolorText.value = els.logoRecolor.value;
      updatePreview();
    });
    els.logoRecolorText.addEventListener("input", () => {
      const hex = hexFromInput(els.logoRecolorText.value);
      if (hex) els.logoRecolor.value = hex;
      updatePreview();
    });

    // Logo color tint events
    els.enableLogoColor.addEventListener("change", updatePreview);
    els.logoColorOpacity.addEventListener("input", updatePreview);

    // Sync hex text boxes <-> color inputs
    els.logoColor.addEventListener("input", () => {
      els.logoColorText.value = els.logoColor.value;
      updatePreview();
    });
    els.logoColorText.addEventListener("input", () => {
      const hex = hexFromInput(els.logoColorText.value);
      if (hex) els.logoColor.value = hex;
      updatePreview();
    });

    els.topColor.addEventListener("input", () => {
      els.topColorText.value = els.topColor.value;
      updatePreview();
    });
    els.topColorText.addEventListener("input", () => {
      const hex = hexFromInput(els.topColorText.value);
      if (hex) els.topColor.value = hex;
      updatePreview();
    });

    els.bottomColor.addEventListener("input", () => {
      els.bottomColorText.value = els.bottomColor.value;
      updatePreview();
    });
    els.bottomColorText.addEventListener("input", () => {
      const hex = hexFromInput(els.bottomColorText.value);
      if (hex) els.bottomColor.value = hex;
      updatePreview();
    });

    els.copySettings.addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(els.settingsOutput.value);
        els.copySettings.textContent = "Copied!";
        setTimeout(() => els.copySettings.textContent = "Copy settings", 1200);
      } catch (e) {
        alert("Could not copy automatically. Select the text below and copy it.");
      }
    });

    // Initial render
    updatePreview();
  </script>
</body>
</html>
